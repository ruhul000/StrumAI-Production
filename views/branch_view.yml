version: 1
type: view
name: branch
description: 'The information on the physical bank branch '
model_name: strum_platform_model
sql_table_name: dbo.Branch
default_date: data_period
identifiers:
- name: branchid
  type: primary
  sql: concat(${branchid}, ${data_period_raw})
fields:
- name: branchid
  field_type: dimension
  type: number
  hidden: true
  primary_key: true
  sql: ${TABLE}.branchid

- name: mktid
  field_type: dimension
  type: number
  hidden: true
  sql: ${TABLE}.mktid

- name: regid
  field_type: dimension
  type: number
  hidden: true
  sql: ${TABLE}.regid

- name: instid
  field_type: dimension
  type: number
  hidden: true
  sql: ${TABLE}.instid

- name: instbranch
  field_type: dimension
  type: string
  hidden: true
  primary_key: false
  description: ''
  sql: ${TABLE}.instbranch
  searchable: true

- name: rollup
  field_type: dimension
  type: number
  hidden: true
  primary_key: false
  description: User may group multiple branches together for reporting results
  sql: ${TABLE}.rollup
  searchable: false

- name: name
  field_type: dimension
  type: string
  hidden: false
  primary_key: false
  label: Branch Name
  description: Branch full name
  sql: ${TABLE}.name
  searchable: true

- name: shortname
  field_type: dimension
  type: string
  hidden: true
  sql: ${TABLE}.shortname
  searchable: true

- name: branch_type
  field_type: dimension
  type: number
  description: Code indicating branch type (from FDIC definition) Main office = 0
  sql: ${TABLE}.branchtype

- name: address
  field_type: dimension
  type: string
  hidden: true
  primary_key: false
  description: Street address at which the branch is physically located.
  sql: ${TABLE}.address
  searchable: true

- name: address2
  field_type: dimension
  type: string
  hidden: true
  primary_key: false
  description: ''
  sql: ${TABLE}.address2
  searchable: true

- name: city
  field_type: dimension
  type: string
  hidden: false
  primary_key: false
  label: Branch City
  description: City in which branch is physically located.
  sql: ${TABLE}.city
  searchable: true

- name: state
  field_type: dimension
  type: string
  hidden: false
  primary_key: false
  label: Branch State
  description: ''
  sql: ${TABLE}.state
  searchable: true

- name: zip
  field_type: dimension
  type: string
  hidden: false
  primary_key: false
  label: Branch ZIP
  description: ''
  sql: ${TABLE}.zip
  searchable: true

- name: zip4
  field_type: dimension
  type: string
  hidden: true
  primary_key: false
  description: ''
  sql: ${TABLE}.zip4
  searchable: true

- name: latitude
  field_type: dimension
  type: number
  hidden: true
  primary_key: false
  description: ''
  sql: ${TABLE}.latitude
  searchable: false

- name: longitude
  field_type: dimension
  type: number
  hidden: true
  primary_key: false
  description: ''
  sql: ${TABLE}.longitude
  searchable: false

- name: mktdef
  field_type: dimension
  type: number
  hidden: true
  sql: ${TABLE}.mktdef

- name: established_date
  field_type: dimension_group
  type: time
  datatype: datetime
  hidden: true
  timeframes:
  - raw
  - date
  - day_of_year
  - month
  - month_of_year
  - year
  sql: ${TABLE}.estdate

- name: data_period
  field_type: dimension_group
  type: time
  datatype: date
  description: >-
    This is the period of the snapshot, and it is always the date of the end
    of the month
  timeframes:
  - raw
  - date
  - month
  sql: ${TABLE}.DataPeriod

- name: number_of_branches
  field_type: measure
  type: count_distinct
  description: The number of physical bank branches
  value_format_name: decimal_0
  sql: ${branchid}
